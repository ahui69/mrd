/* Reset / base */
*{box-sizing:border-box}
html,body{height:100%;margin:0;padding:0}
:root{
  --bg:#0b0b0f;--panel:#121219;--ink:#f6f090;--muted:#c2bf8f;--primary:#ffd84a;--border:#2a2a34;
}
body{font:16px/1.45 -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;color:var(--ink);background:var(--bg)}

/* Layout */
#app{display:grid;grid-template-columns:0 1fr;grid-template-rows:100dvh;max-width:100vw;overflow:hidden}
#app.sidebar-open{grid-template-columns:280px 1fr}
#sidebar{background:var(--panel);border-right:1px solid var(--border);display:flex;flex-direction:column}
#main{display:flex;flex-direction:column;height:100dvh}

.sidebar-header{display:flex;align-items:center;gap:8px;padding:12px 12px 8px;border-bottom:1px solid var(--border)}
.sidebar-header h1{font-size:16px;margin:0}
.sidebar-actions{display:flex;gap:8px;padding:8px 12px;border-bottom:1px solid var(--border)}
.sidebar-actions button{padding:8px 10px;border:1px solid var(--border);border-radius:8px;background:#1a1a22;color:var(--ink);cursor:pointer}
.history-list{flex:1;overflow:auto;padding:8px 8px 24px}
.history-list .item{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:8px;border:1px solid var(--border);border-radius:8px;background:#1a1a22;margin:8px}
.history-list .item button{border:none;background:none;color:var(--muted);cursor:pointer}
.links{padding:8px 12px;border-top:1px solid var(--border);display:flex;gap:12px;flex-wrap:wrap}
.links a{font-size:12px;color:var(--muted);text-decoration:none}

.chat{flex:1;overflow:auto;padding:16px}
.controls{padding:8px 16px;border-top:1px solid var(--border);background:#0f0f15;color:var(--ink)}
.controls details{margin:8px 0}
.controls .row{display:flex;gap:8px}
.controls input{flex:1;padding:8px 10px;border:1px solid var(--border);border-radius:10px;background:#14141d;color:var(--ink)}
.controls button{padding:8px 10px;border:1px solid var(--primary);border-radius:10px;background:var(--primary);color:#000;cursor:pointer}
.msg{max-width:70ch;padding:10px 12px;border-radius:14px;border:1px solid var(--border);background:#191922;margin:10px 0;word-wrap:break-word;white-space:pre-wrap;color:var(--ink)}
.msg.user{margin-left:auto;background:#222230;border-color:#3a3a44}
.msg.assistant{margin-right:auto;background:#15151f}

#composer{display:flex;gap:8px;padding:12px;border-top:1px solid var(--border);background:#0f0f15}
#composer input[type="text"]{flex:1;padding:10px 12px;border:1px solid var(--border);border-radius:12px;outline:none;font-size:16px;background:#14141d;color:var(--ink)}
#composer input[type="text"]:focus{border-color:var(--primary)}
#composer .file{display:flex;align-items:center;justify-content:center;width:38px;height:38px;border:1px solid var(--border);border-radius:10px;background:#14141d;color:var(--ink);cursor:pointer}
#composer #mic{width:38px;height:38px;border:1px solid var(--border);border-radius:10px;background:#14141d;color:var(--ink);cursor:pointer}
#composer #send{padding:0 14px;border:1px solid var(--primary);border-radius:10px;background:var(--primary);color:#000;cursor:pointer}
#composer input[type="file"]{display:none}

.typing{display:flex;align-items:center;gap:6px;padding:8px 12px;color:var(--muted)}
.typing.hidden{display:none}
.typing span{display:inline-block;width:6px;height:6px;background:var(--muted);border-radius:50%;animation:bounce 1.2s infinite ease-in-out}
.typing span:nth-child(2){animation-delay:.2s}
.typing span:nth-child(3){animation-delay:.4s}
@keyframes bounce{0%,80%,100%{transform:scale(.6);opacity:.3}40%{transform:scale(1);opacity:.8}}

/* iOS Safari friendly */
input,button{font-size:16px} /* zapobiega zoomowi po focus */
#app{height:100dvh}

/* Sidebar toggle on narrow */
@media (max-width: 820px){
  #toggleSidebar{position:fixed;left:10px;top:10px;z-index:10}
}
